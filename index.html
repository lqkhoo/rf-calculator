<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/xhtml; charset=utf-16"/>
        <link rel="stylesheet" href="css/bootstrap-5.1.0.min.css"/>
        <link rel="stylesheet" href="css/jquery-ui.min.css"/>
        <link rel="stylesheet" href="css/knockout-autocomplete.css"/>
        <link rel="stylesheet" href="css/rf5planner.css"/>
        <!-- <script type="text/javascript" src="js/lib/requirejs-2.3.6-min.js"></script> -->
        <script type="text/javascript" src="js/lib/jquery-1.11.2.min.js"></script>
        <script type="text/javascript" src="js/rf5planner.js"></script>
        <script type="text/javascript" src="js/lib/jquery-ui-1.11.0.min.js"></script>
        <script type="text/javascript" src="js/lib/jquery-ui-autocomplete-extension.js"></script>
        <script type="text/javascript" src="js/modified-knockout-jqueryui.js"></script>
        <!--
        <script type="text/javascript" src="js/lib/knockout-autocomplete.js"></script>
        -->
        
    </head>
    <body>

        <nav class="navbar navbar-default">
            <div class="container">
                <table>
                    <tbody>
                        <tr>
                            <td rowspan="2"><h4 class="title">Rune Factory 5 Gear Planner</h4></td>
                            <td>
                                <div class="form-check form-switch">
                                    <label class="form-check-label">
                                        <input class="form-check-input" type="checkbox" data-bind="checked: IsEnglishSelected"/>
                                        Show English
                                    </label>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <div class="form-check form-switch">
                                    <label class="form-check-label">
                                        <input class="form-check-input" type="checkbox" data-bind="checked: IsJapaneseSelected"/>
                                        Show Japanese
                                    </label>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
                
                <!-- Binding context window.RF5Planner -->
                <ul id="character-tabs" class="nav nav-tabs" data-bind="foreach: { data: CharacterList }" role="tablist" >
                    <!-- ko let: { characterIdx: $index(), RF5Character: $data } -->
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" data-bind="attr: { 'data-bs-target': '#character-'+ characterIdx }" data-bs-toggle="tab" role="tab">
                                <img class="icon" data-bind="attr: { src: image_uri }"/>
                            </button>
                        </li>
                        <!-- ko if: ($index() === ($parent.CharacterList().length-1)) -->
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" data-bind="click: $root.AddCharacter">+</button>
                            </li>
                        <!-- /ko -->
                    <!-- /ko -->
                </ul>
            </div>
        </nav>

        <main id="main" class="container" data-bind="css: { 'lang_en': IsEnglishSelected(), 'lang_jp': IsJapaneseSelected() }">
            
            <!-- Binding context indow.RF5Planner -->
            <div id="character-tab-pages" class="tab-content container" data-bind="foreach: { data: CharacterList }">
                <!-- ko let: { characterIdx: $index(), RF5Character: $data } -->
                <div class="tab-pane fade" data-bind="attr: { id: 'character-' + $index() }" role="tab-panel">
                    <table class="table table-bordered stats-table">
                        <thead>
                            <tr>
                                <th rowspan="3"><div class="dummy-header"></div></th>
                                <th rowspan="2" colspan="2"></th>
                                <th colspan="20">OFFENSE</th>
                                <th colspan="21">DEFENSE</th>
                            </tr>
                            <tr>
                                <th colspan="7">STAT</th>
                                <th colspan="13">STATUS</th>
                                <th colspan="8">ELE</th>
                                <th colspan="13">STATUS</th>
                            </tr>
                            <tr>
                                <th>LVL</th><th>RAR</th>
                                <th>ATK</th><th>DEF</th><th>MAT</th><th>MDF</th><th>STR</th><th>INT</th><th>VIT</th>
                                <th>DIZ</th><th>CRT</th><th>KNO</th><th>DUR</th><th>STN</th><th>PSN</th><th>SEA</th><th>PAR</th><th>SLP</th><th>FTG</th><th>SCK</th><th>FNT</th><th>DRN</th>
                                <th>FIR</th><th>WTR</th><th>EAR</th><th>WND</th><th>LGT</th><th>DRK</th><th>LOV</th><th>NUL</th>
                                <th>DIZ</th><th>CRT</th><th>KNO</th><th>DUR</th><th>STN</th><th>PSN</th><th>SEA</th><th>PAR</th><th>SLP</th><th>FTG</th><th>SCK</th><th>FNT</th><th>DRN</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- ko template: { name: 'TEMPLATE-character', data: RF5Character } --><!-- /ko -->
                            
                            <!-- ko let: { equipmentType: 'weapon' } -->
                                <!-- ko template: { name: 'TEMPLATE-group-header', data: { model: $data, name_en: 'Weapons', name_jp: '\u6b66\u5668' } } --><!-- /ko -->
                                <!-- ko foreach: Weapons() -->
                                    <!-- ko let: { equipmentIdx: $index(), RF5Item: $data } -->
                                        <!-- ko template: { name: 'TEMPLATE-weapon', data: RF5Item }--><!-- /ko -->
                                    <!-- /ko -->
                                <!-- /ko -->
                                <!-- ko template: { name: 'TEMPLATE-group-footer' } --><!-- /ko -->
                            <!-- /ko -->

                            <!-- ko let: { equipmentType: 'shield' } -->
                            <!-- ko template: { name: 'TEMPLATE-group-header', data: { model: $data, name_en: 'Shields', name_jp: '\u76fe' } } --><!-- /ko -->
                            <!-- ko foreach: Shields() -->
                                <!-- ko let: { equipmentIdx: $index(), RF5Item: $data } -->
                                    <!-- ko template: { name: 'TEMPLATE-shield', data: RF5Item }--><!-- /ko -->
                                <!-- /ko -->
                            <!-- /ko -->
                            <!-- ko template: { name: 'TEMPLATE-group-footer' } --><!-- /ko -->
                            <!-- /ko -->

                            <!-- ko let: { equipmentType: 'headgear' } -->
                                <!-- ko template: { name: 'TEMPLATE-group-header', data: { model: $data, name_en: 'Headgears', name_jp: '\u982d\u88c5\u5099' } } --><!-- /ko -->
                                <!-- ko foreach: Headgears() -->
                                    <!-- ko let: { equipmentIdx: $index(), RF5Item: $data } -->
                                        <!-- ko template: { name: 'TEMPLATE-headgear', data: RF5Item }--><!-- /ko -->
                                    <!-- /ko -->
                                <!-- /ko -->
                                <!-- ko template: { name: 'TEMPLATE-group-footer' } --><!-- /ko -->
                            <!-- /ko -->

                            <!-- ko let: { equipmentType: 'armor' } -->
                                <!-- ko template: { name: 'TEMPLATE-group-header', data: { model: $data, name_en: 'Armor', name_jp: '\u4f53\u88c5\u5099' } } --><!-- /ko -->
                                <!-- ko foreach: Armors() -->
                                    <!-- ko let: { equipmentIdx: $index(), RF5Item: $data } -->
                                        <!-- ko template: { name: 'TEMPLATE-armor', data: RF5Item }--><!-- /ko -->
                                    <!-- /ko -->
                                <!-- /ko -->
                                <!-- ko template: { name: 'TEMPLATE-group-footer' } --><!-- /ko -->
                            <!-- /ko -->

                            <!-- ko let: { equipmentType: 'boots' } -->
                                <!-- ko template: { name: 'TEMPLATE-group-header', data: { model: $data, name_en: 'Boots', name_jp: '\u8db3\u88c5\u5099' } } --><!-- /ko -->
                                <!-- ko foreach: Boots() -->
                                    <!-- ko let: { equipmentIdx: $index(), RF5Item: $data } -->
                                        <!-- ko template: { name: 'TEMPLATE-boots', data: RF5Item }--><!-- /ko -->
                                    <!-- /ko -->
                                <!-- /ko -->
                                <!-- ko template: { name: 'TEMPLATE-group-footer' } --><!-- /ko -->
                            <!-- /ko -->

                            <!-- ko let: { equipmentType: 'accessory' } -->
                                <!-- ko template: { name: 'TEMPLATE-group-header', data: { model: $data, name_en: 'Accessories', name_jp: '\u30a2\u30af\u30bb\u30b5\u30ea\u30fc' } } --><!-- /ko -->
                                <!-- ko foreach: Accessories() -->
                                    <!-- ko let: { equipmentIdx: $index(), RF5Item: $data } -->
                                        <!-- ko template: { name: 'TEMPLATE-accessory', data: RF5Item }--><!-- /ko -->
                                    <!-- /ko -->
                                <!-- /ko -->
                                <!-- ko template: { name: 'TEMPLATE-group-footer' } --><!-- /ko -->
                            <!-- /ko -->

                        </tbody>
                    </table>
                </div>
                <!-- /ko -->
            </div>
        </main>

        <script type="text/javascript" src="js/lib/bootstrap-5.1.0.bundle.js"></script>
        <!--
        <script type="text/javascript" src="js/lib/bootstrap-5.1.0.bundle.min.js"></script>
        <script type="text/javascript" src="js/lib/bootstrap-5.1.0.bundle.min.js.map"></script>
        -->
        
    </body>

    <script type="text/html" id="TEMPLATE-character">
        <tr>
            <td>
                <label class="icon-group character">
                    <table>
                        <tbody>
                            <tr>
                                <td class="icon-td"><img data-bind="attr: { src: image_uri }"/></td>
                                <td>
                                    <span class="lang jp" data-bind="text: name_jp"></span>
                                    <span class="lang en" data-bind="text: name_en"></span>
                                </td>
                                <td class="icon-td">
                                    <input type="text" data-bind="autocomplete: { source: GetSearchStrings(), html: 'html', minLength: 0, select: RF5Character.AutoCompleteSelectHandler }">
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </label>
            </td>
        </tr>
        <tr>
            <td>General's set bonus</td>
        </tr>
        <tr>
            <td>Clover bonus</td>
        </tr>
        <tr>
            <td>Happy ring bonus</td>
        </tr>
        <tr>
            <td>Rare can bonus</td>
        </tr>
    </script>


    <script type="text/html" id="TEMPLATE-header-icon-group">
        <div class="icon-group" data-bind="class: equipmentType">
            <input type="radio" data-bind="attr: { name: 'char-'+ characterIdx +'-'+ equipmentType }">
            <button class="btn collapsed" data-bs-toggle="collapse" data-bind="attr: { 'data-bs-target': '.char-'+ characterIdx +'-'+ equipmentType +'-'+ equipmentIdx }, class: 'char-'+ characterIdx +'-'+ equipmentType +'-toggler'">
                <table>
                    <tbody>
                        <tr>
                            <td class="icon-td"><img class="icon" data-bind="attr: { src: $data.RF5Item.BaseItem().image_uri }"/></td>
                            <td>
                                <span class="lang jp" data-bind="text: $data.RF5Item.BaseItem().name_jp"></span>
                                <span class="lang en" data-bind="text: $data.RF5Item.BaseItem().name_en"></span>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </button>
        </div>
    </script>


    <script type="text/html" id="TEMPLATE-group-header">
        <tr>
            <td style="background-color: #dddddd;">
                <button class="group-header btn collapsed" data-bs-toggle="collapse" data-bind="attr: { 'data-bs-target': '.char-'+ characterIdx +'-'+ equipmentType }, click: $root.OnGroupHeaderClickHandler.bind(event, characterIdx, equipmentType)">
                    <span class="lang jp" data-bind="text: name_jp"></span>
                    <span class="lang en" data-bind="text: name_en"></span>
                </button>
            </td>
            <td colspan="41" style="background-color: #dddddd;">foobar</td>
        </tr>
    </script>

    <script type="text/html" id="TEMPLATE-group-footer">
        <tr class="collapse" data-bind="class: 'char-'+ characterIdx +'-'+ equipmentType">
            <td>+</td>
        </tr>
    </script>



    <!-- Mostly text-replace for 'weapon', 'shield', 'headgear', 'armor', 'boots', 'accessories' -->

    <script type="text/html" id="TEMPLATE-weapon">
        <tr class="collapse" data-bind="class: 'char-'+ characterIdx +'-weapon'">
            <td data-bind="template: { name: 'TEMPLATE-header-icon-group', data: { RF5Item: $data, equipmentType: 'weapon' } }"></td>
        </tr>
        <!-- ko template: { name: 'TEMPLATE-level-rarity-bonus', data: { model: $data, equipmentType: 'weapon' } }--><!-- /ko -->
        <!-- ko template: { name: 'TEMPLATE-equipment-slots' } --><!-- /ko -->
    </script>

    <script type="text/html" id="TEMPLATE-shield">
        <tr class="collapse" data-bind="class: 'char-'+ characterIdx +'-shield'">
            <td data-bind="template: { name: 'TEMPLATE-header-icon-group', data: { RF5Item: $data, equipmentType: 'shield' } }"></td>
        </tr>
        <!-- ko template: { name: 'TEMPLATE-level-rarity-bonus', data: { model: $data, equipmentType: 'shield' } }--><!-- /ko -->
        <tr class="collapse" data-bind="class: 'char-'+ characterIdx +'-'+ equipmentType +'-'+ equipmentIdx">
            <td>Has scale item</td>
        </tr>
        <!-- ko template: { name: 'TEMPLATE-equipment-slots' } --><!-- /ko -->
    </script>

    <script type="text/html" id="TEMPLATE-headgear">
        <tr class="collapse" data-bind="class: 'char-'+ characterIdx +'-headgear'">
            <td data-bind="template: { name: 'TEMPLATE-header-icon-group', data: { RF5Item: $data, equipmentType: 'headgear' } }"></td>
        </tr>
        <!-- ko template: { name: 'TEMPLATE-level-rarity-bonus', data: { model: $data, equipmentType: 'headgear' } }--><!-- /ko -->
        <!-- ko template: { name: 'TEMPLATE-equipment-slots' } --><!-- /ko -->
    </script>

    <script type="text/html" id="TEMPLATE-armor">
        <tr class="collapse" data-bind="class: 'char-'+ characterIdx +'-armor'">
            <td data-bind="template: { name: 'TEMPLATE-header-icon-group', data: { RF5Item: $data, equipmentType: 'armor' } }"></td>
        </tr>
        <!-- ko template: { name: 'TEMPLATE-level-rarity-bonus', data: { model: $data, equipmentType: 'armor' } }--><!-- /ko -->
        <!-- ko template: { name: 'TEMPLATE-equipment-slots' } --><!-- /ko -->
    </script>

    <script type="text/html" id="TEMPLATE-boots">
        <tr class="collapse" data-bind="class: 'char-'+ characterIdx +'-boots'">
            <td data-bind="template: { name: 'TEMPLATE-header-icon-group', data: { RF5Item: $data, equipmentType: 'boots' } }"></td>
        </tr>
        <!-- ko template: { name: 'TEMPLATE-level-rarity-bonus', data: { model: $data, equipmentType: 'boots' } }--><!-- /ko -->
        <!-- ko template: { name: 'TEMPLATE-equipment-slots' } --><!-- /ko -->
    </script>

    <script type="text/html" id="TEMPLATE-accessory">
        <tr class="collapse" data-bind="class: 'char-'+ characterIdx +'-accessory'">
            <td data-bind="template: { name: 'TEMPLATE-header-icon-group', data: { RF5Item: $data, equipmentType: 'accessory' } }"></td>
        </tr>
        <!-- ko template: { name: 'TEMPLATE-level-rarity-bonus', data: { model: $data, equipmentType: 'accessory' } }--><!-- /ko -->
        <!-- ko template: { name: 'TEMPLATE-equipment-slots' } --><!-- /ko -->
    </script>

    
    <script type="text/html" id="TEMPLATE-level-rarity-bonus">
        <tr class="collapse" data-bind="class: 'char-'+ characterIdx +'-'+ equipmentType +'-'+ equipmentIdx">
            <td>rarity bonus</td>
        </tr>
        <tr class="collapse" data-bind="class: 'char-'+ characterIdx +'-'+ equipmentType +'-'+ equipmentIdx">
            <td>level bonus</td>
        </tr>
    </script>

    <script type="text/html" id="TEMPLATE-equipment-slots">
        <!-- ko template: { name: 'TEMPLATE-slot', data: { RF5Slot: BaseItem(), slotType: 'B', slotIdx: ' ' } }--><!-- /ko -->
        <!-- ko foreach: { data: RecipeSlots } -->
            <!-- ko let: { slotIdx: $index() } -->
                <!-- ko template: { name: 'TEMPLATE-slot', data: { RF5Slot: $data, slotType: 'R' } } --><!-- /ko -->
            <!-- /ko -->
        <!-- /ko -->
        <!-- ko foreach: { data: ArrangeSlots } -->
            <!-- ko let: { slotIdx: $index() } -->
                <!-- ko template: { name: 'TEMPLATE-slot', data: { RF5Slot: $data, slotType: 'A' } } --><!-- /ko -->
            <!-- /ko -->
        <!-- /ko -->
        <!-- ko foreach: { data: UpgradeSlots } -->
            <!-- ko let: { slotIdx: $index() } -->
                <!-- ko template: { name: 'TEMPLATE-slot', data: { RF5Slot: $data, slotType: 'U' } } --><!-- /ko -->
            <!-- /ko -->
        <!-- /ko -->
    </script>

    <script type="text/html" id="TEMPLATE-slot">
        <tr class="collapse" data-bind="class: 'char-'+ characterIdx +'-'+ equipmentType +'-'+ equipmentIdx">
            <td>
                <label class="icon-group small" data-bind="class: $data.uiEquipmentType">
                    <table>
                        <tbody>
                            <tr>
                                <td data-bind="text: $data.slotType + slotIdx"></td>
                                <td class="icon-td"><img class="icon small" data-bind="attr: { src: $data.RF5Slot.image_uri }"/></td>
                                <td>
                                    <span class="lang jp" data-bind="text: $data.RF5Slot.name_jp"></span>
                                    <span class="lang en" data-bind="text: $data.RF5Slot.name_en"></span>
                                </td>
                                <td>
                                    <input type="text" data-bind="autocomplete: { source: $data.RF5Slot.GetSearchStrings(), html: 'html', minLength: 0, select: $data.RF5Slot.AutoCompleteSelectHandler }">
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </label>
            </td>
        </tr>
    </script>

</xhtml>